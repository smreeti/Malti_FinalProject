<!DOCTYPE html>
<html lang="en">

<!-- HTML Header-->
<%- include('layouts/header') -%>

    <body>
        <!-- Navigation -->
        <%- include('layouts/navbar') -%>

            <!-- Page Header-->
            <header class="masthead" id="loginBanner">
                <div class="container position-relative px-4 px-lg-5">
                    <div class="row gx-4 gx-lg-5 justify-content-center">
                        <div class="col-md-10 col-lg-8 col-xl-7">
                            <div class="site-heading">
                                <h1>Book Order Details</h1>
                                <span class="subheading">Book Order Details</span>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <main>
                <% if(bookOrderDetails.orderItems.length !=null && bookOrderDetails.orderItems.length>0) { %>
                    <form class="form" name="addBookOrderForm" id="addBookOrderForm" action="/verifyOrder"
                        method="POST">
                        <input type="hidden" id="bookOrderDetails" name="bookOrderDetails" value=<%=bookOrderDetails.bookOrder.orderNumber%>>

                        <h1> Book Order Details</h1>
                        <div>
                            <p> Order Number : <%= bookOrderDetails.bookOrder.orderNumber %>
                            </p>
                            <p> Ordered Date : <%= bookOrderDetails.bookOrder.orderedDate.toISOString().split('T')[0] %>
                            </p>
                            <p> Total Items : <%= bookOrderDetails.bookOrder.quantity %>
                            </p>
                        </div>

                        <table class="selectedBookTable">
                            <thead>
                                <tr>
                                    <th>S.N.</th>
                                    <th>Book</th>
                                    <th>Quantity</th>
                                    <th>Verify</th>
                                </tr>
                            </thead>

                            <tbody>
                                <% for(let i=0; i< bookOrderDetails.orderItems.length; i ++){ %>
                                    <tr>
                                        <td>
                                            <%= i+1 %>
                                        </td>
                                        <td>
                                            <%= bookOrderDetails.orderItems[i].name %>
                                        </td>
                                        <td>
                                            <%= bookOrderDetails.orderItems[i].quantity %>
                                        </td>
                                        <td>
                                            <input type="radio" id="received" class="orderStatus"
                                                name="orderStatus/<%= i %>" value="received">
                                            <label for="received">Received</label>

                                            <input type="radio" id="cancelled" class="orderStatus"
                                                name="orderStatus/<%= i %>" value="cancelled">
                                            <label for="cancelled">Cancelled</label>
                                        </td>
                                    </tr>
                                    <% } %>
                            </tbody>
                        </table>
                        <div class="button_container">
                            <button type="submit">Confirm Order</button>
                        </div>
                    </form>
                    <%}else{ %>
                        <p> No book orders yet!</p>
                        <%} %>
            </main>

            <!--Footer-->
            <%- include('layouts/footer') -%>
                <script src="https://code.jquery.com/jquery-3.6.1.min.js"
                    integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
                <script src="/js/verifyOrder.js"></script>
    </body>

</html>